{"version":3,"file":"script.js","mappings":"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","sources":["webpack://project2/./src/constants.js","webpack://project2/./src/listeners.js","webpack://project2/./src/render.js","webpack://project2/./src/services.js","webpack://project2/./src/state.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/script.js"],"sourcesContent":["export const SERVER = {\n\tAUTH_MISSING: 'auth-missing',\n\tINVALID_USERNAME: 'invalid-username',\n\tFORBIDDEN_USERNAME: 'forbidden-username',\n\tINVALID_MESSAGE: 'invalid-message',\n};\n\nexport const CLIENT = {\n\tNETWORK_ERROR: 'network-error',\n};\n\nexport const MESSAGES = {\n\t[CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network, please try again later.',\n\t[SERVER.AUTH_MISSING]: 'Your session is invalid or has expired, logging you out...',\n\t[SERVER.INVALID_USERNAME]: 'Please enter a valid (within 20 letters and/or numbers) username.',\n\t[SERVER.FORBIDDEN_USERNAME]: 'Sorry, DOGs are forbidden, please use another username.',\n\t[SERVER.INVALID_MESSAGE]: 'Cannot send empty messages!',\n\tdefault: 'Something went wrong, please try again later.',\n};\n","import { fetchSession, fetchLogin, fetchLogout, fetchAddMessage, fetchUsers, fetchMessages } from './services';\nimport state, {\n\twaitOnLogin,\n\tlogin,\n\tlogout,\n\twaitOnUsers,\n\tsetUsers,\n\twaitOnMessages,\n\tsetMessages,\n\tsetError,\n} from './state';\nimport { render, renderMessages } from './render';\n\nexport function addAbilityToLogin(appEl) {\n\tappEl.addEventListener('submit', (e) => {\n\t\te.preventDefault();\n\t\tif (!e.target.classList.contains('login-form')) return;\n\n\t\tconst usernameInput = appEl.querySelector('.input--username').value;\n\t\twaitOnLogin();\n\t\trender({ state, appEl });\n\t\tfetchLogin(usernameInput)\n\t\t\t.then(() => {\n\t\t\t\tlogin();\n\t\t\t\twaitOnUsers();\n\t\t\t\twaitOnMessages();\n\t\t\t\trender({ state, appEl });\n\t\t\t\treturn Promise.all([fetchUsers(), fetchMessages()]);\n\t\t\t})\n\t\t\t.then((data) => {\n\t\t\t\tsetUsers(data[0]);\n\t\t\t\tsetMessages(data[1]);\n\t\t\t\trender({ state, appEl });\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tlogout();\n\t\t\t\tsetError(err?.error || 'ERROR');\n\t\t\t\trender({ state, appEl });\n\t\t\t});\n\t});\n}\n\nexport function addAbilityToLogout(appEl) {\n\tappEl.addEventListener('click', (e) => {\n\t\tif (!e.target.classList.contains('logout-btn')) return;\n\n\t\tlogout();\n\t\trender({ state, appEl });\n\t\tfetchLogout().catch((err) => {\n\t\t\tsetError(err?.error || 'ERROR');\n\t\t\trender({ state, appEl });\n\t\t});\n\t});\n}\n\nexport function addAbilityToSend(appEl) {\n\tappEl.addEventListener('submit', (e) => {\n\t\tif (!e.target.classList.contains('send-form')) return;\n\n\t\tconst messageInputEl = appEl.querySelector('.send-form__input--text');\n\t\tfetchAddMessage(messageInputEl.value)\n\t\t\t.then((messages) => {\n\t\t\t\tsetMessages(messages);\n\t\t\t\trenderMessages({ state, appEl });\n\t\t\t\tmessageInputEl.value = '';\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tsetError(err?.error || 'ERROR');\n\t\t\t\trenderMessages({ state, appEl });\n\t\t\t});\n\t});\n}\n","const spinnerHTML = `<span><div class=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div></span>`;\n\nexport function render({ state, appEl }) {\n\tconst html = `\n        ${generateLoginHTML(state)}\n        ${generateChatHTML(state)}\n    `;\n\tappEl.innerHTML = html;\n}\n\nfunction generateLoginHTML(state) {\n\tif (state.isLoginPending) return '<section class=\"login-view\">' + spinnerHTML + '</section>';\n\tif (state.isLoggedIn) return '';\n\n\treturn (\n\t\t`\n        <section class=\"login-view\">\n            <form class=\"login-form\">\n                <h1 class=\"login-text\">Log In</h1>\n            ` +\n\t\t`\n                ${state.showError ? '<p class=\"warning\">' + state.error + '</p>' : ''}\n            ` +\n\t\t`\n                <input placeholder=\"Enter username to login\" type=\"text\" class=\"input--username\" name=\"username\" />\n                <button class=\"login-btn\">Log In</button>\n            </form>\n        </section>\n    `\n\t);\n}\n\nfunction generateChatHTML(state) {\n\tif (!state.isLoggedIn) return '';\n\treturn `\n        <section class=\"chat-view\">\n\t\t\t<div class=\"users\">\n                ${generateUsersHTML(state)}\n            </div>\n\t\t\t<div class=\"messages\">\n                ${generateMessagesHTML(state)}\n            </div>\n\t\t\t<div class=\"logout\">\n                ${generateLogoutHTML(state)}\n            </div>\n\t\t\t<form class=\"send-form\">\n                ${generateSendFormHTML(state)}\n            </form>\n\t\t</section>\n    `;\n}\n\nfunction generateUsersHTML(state) {\n\tif (!state.isLoggedIn) return '';\n\treturn `\n        <h3>${state.isUsersPending ? spinnerHTML : 'Active Users'}</h3>\n        <ul class=\"user-list\">\n        ${Object.entries(state.users)\n\t\t\t.map((el) => {\n\t\t\t\tif (el[1]) {\n\t\t\t\t\treturn `\n                        <li>\n                            <div class=\"user\">\n                                <div class=\"avatar user__avatar\">${el[0].slice(0, 1)}</div>\n                                <span class=\"username\">${el[0]}</span>\n                            </div>\n                        </li>\n                    `;\n\t\t\t\t}\n\t\t\t\treturn '';\n\t\t\t})\n\t\t\t.join('')}\n        </ul>\n    `;\n}\n\nfunction generateMessagesHTML(state) {\n\tif (!state.isLoggedIn) return '';\n\n\treturn `\n        <h3>${state.isMessagesPending ? spinnerHTML : 'Public Chat Room'}</h3>\n        ${state.showError ? '<p class=\"warning\">' + state.error + '</p>' : ''}\n        <ol class=\"message-list\">\n        ${state.messages\n\t\t\t.slice()\n\t\t\t.reverse()\n\t\t\t.map((el) => {\n\t\t\t\treturn `\n                    <div class=\"message\">\n                        <div class=\"message__sender\">\n                            <div class=\"avatar sender__avatar\">${el.username.slice(0, 1)}</div>\n                            <span class=\"sender__username\">${el.username}</span>\n                        </div>\n                        <p class=\"message__text\">${el.message}</p>\n                    </div>\n                `;\n\t\t\t})\n\t\t\t.join('')}\n        </ol>\n    `;\n}\n\nfunction generateLogoutHTML(state) {\n\tif (!state.isLoggedIn) return '';\n\treturn '<button class=\"logout-btn\">Log Out</button>';\n}\n\nfunction generateSendFormHTML(state) {\n\tif (!state.isLoggedIn) return '';\n\treturn `\n        <input\n            placeholder=\"Enter message to send\"\n            type=\"text\"\n            class=\"send-form__input--text\"\n            name=\"text\"\n            required\n        />\n        <button class=\"send-form__btn\" type=\"submit\">Send</button>\n    `;\n}\n\nexport function renderUsers({ state, appEl }) {\n\tconst usersEl = appEl.querySelector('.users');\n\tif (!usersEl) return;\n\tusersEl.innerHTML = generateUsersHTML(state);\n}\n\nexport function renderMessages({ state, appEl }) {\n\tconst messagesEl = appEl.querySelector('.messages');\n\tif (!messagesEl) return;\n\tmessagesEl.innerHTML = generateMessagesHTML(state);\n}\n","export function fetchSession() {\n\treturn fetch('/api/v1/sessions', {\n\t\tmethod: 'GET',\n\t})\n\t\t.catch(() => Promise.reject({ error: 'network-error' }))\n\t\t.then((resp) => {\n\t\t\tif (resp.ok) {\n\t\t\t\treturn resp.json();\n\t\t\t}\n\t\t\treturn resp\n\t\t\t\t.json()\n\t\t\t\t.catch((error) => Promise.reject({ error }))\n\t\t\t\t.then((err) => Promise.reject(err));\n\t\t});\n}\n\nexport function fetchLogin(username) {\n\treturn fetch('/api/v1/sessions', {\n\t\tmethod: 'POST',\n\t\theaders: new Headers({\n\t\t\t'content-type': 'application/json',\n\t\t}),\n\t\tbody: JSON.stringify({ username }),\n\t})\n\t\t.catch(() => Promise.reject({ error: 'network-error' }))\n\t\t.then((resp) => {\n\t\t\tif (resp.ok) {\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\t\t\treturn resp\n\t\t\t\t.json()\n\t\t\t\t.catch((error) => Promise.reject({ error }))\n\t\t\t\t.then((err) => Promise.reject(err));\n\t\t});\n}\n\nexport function fetchLogout() {\n\treturn fetch('/api/v1/sessions', {\n\t\tmethod: 'DELETE',\n\t})\n\t\t.catch(() => Promise.reject({ error: 'network-error' }))\n\t\t.then((resp) => {\n\t\t\tif (resp.ok) {\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\t\t\treturn resp\n\t\t\t\t.json()\n\t\t\t\t.catch((error) => Promise.reject({ error }))\n\t\t\t\t.then((err) => Promise.reject(err));\n\t\t});\n}\n\nexport function fetchUsers() {\n\treturn fetch('/api/v1/users', { method: 'GET' })\n\t\t.catch(() => Promise.reject({ error: 'network-error' }))\n\t\t.then((resp) => {\n\t\t\tif (resp.ok) return resp.json();\n\t\t\treturn resp\n\t\t\t\t.json()\n\t\t\t\t.catch((error) => Promise.reject({ error }))\n\t\t\t\t.then((err) => Promise.reject(err));\n\t\t});\n}\n\nexport function fetchMessages() {\n\treturn fetch('/api/v1/messages', { method: 'GET' })\n\t\t.catch(() => Promise.reject({ error: 'network-error' }))\n\t\t.then((resp) => {\n\t\t\tif (resp.ok) return resp.json();\n\t\t\treturn resp\n\t\t\t\t.json()\n\t\t\t\t.catch((error) => Promise.reject({ error }))\n\t\t\t\t.then((err) => Promise.reject(err));\n\t\t});\n}\n\nexport function fetchAddMessage(message) {\n\treturn fetch('/api/v1/messages', {\n\t\tmethod: 'POST',\n\t\theaders: new Headers({\n\t\t\t'content-type': 'application/json',\n\t\t}),\n\t\tbody: JSON.stringify({ message }),\n\t})\n\t\t.catch(() => Promise.reject({ error: 'network-error' }))\n\t\t.then((resp) => {\n\t\t\tif (resp.ok) {\n\t\t\t\treturn resp.json();\n\t\t\t}\n\t\t\treturn resp\n\t\t\t\t.json()\n\t\t\t\t.catch((error) => Promise.reject({ error }))\n\t\t\t\t.then((err) => Promise.reject(err));\n\t\t});\n}\n","import { MESSAGES } from './constants';\n\nconst state = {\n\tisLoggedIn: false,\n\tisLoginPending: true,\n\tisUsersPending: false,\n\tisMessagesPending: false,\n\tusers: {},\n\tmessages: [],\n\tshowError: false,\n\terror: '',\n};\n\nexport function waitOnLogin() {\n\tstate.isLoggedIn = false;\n\tstate.isLoginPending = true;\n\tstate.users = {};\n\tstate.messages = [];\n\tstate.showError = false;\n}\n\nexport function login() {\n\tstate.isLoggedIn = true;\n\tstate.isLoginPending = false;\n\tstate.showError = false;\n}\n\nexport function logout() {\n\tstate.isLoggedIn = false;\n\tstate.isLoginPending = false;\n\tstate.users = {};\n\tstate.messages = [];\n\tstate.showError = false;\n}\n\nexport function waitOnUsers() {\n\tstate.users = {};\n\tstate.isUsersPending = true;\n\tstate.showError = false;\n}\n\nexport function setUsers(users) {\n\tstate.users = users;\n\tstate.isUsersPending = false;\n\tstate.showError = false;\n}\n\nexport function waitOnMessages() {\n\tstate.messages = [];\n\tstate.isMessagesPending = true;\n\tstate.showError = false;\n}\n\nexport function setMessages(messages) {\n\tstate.messages = messages;\n\tstate.isMessagesPending = false;\n\tstate.showError = false;\n}\n\nexport function setError(error) {\n\tif (!error) {\n\t\tstate.showError = false;\n\t\tstate.error = '';\n\t} else {\n\t\tstate.showError = true;\n\t\tstate.error = MESSAGES[error] || MESSAGES.default;\n\t}\n}\n\nexport default state;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { fetchSession, fetchLogin, fetchLogout, fetchUsers, fetchMessages } from './services';\nimport { CLIENT, SERVER } from './constants';\nimport state, {\n\twaitOnLogin,\n\tlogin,\n\tlogout,\n\twaitOnUsers,\n\tsetUsers,\n\twaitOnMessages,\n\tsetMessages,\n\tsetError,\n} from './state';\nimport { render, renderMessages, renderUsers } from './render';\nimport { addAbilityToLogin, addAbilityToLogout, addAbilityToSend } from './listeners';\n\nexport const appEl = document.querySelector('#app');\n\naddAbilityToLogin(appEl);\naddAbilityToLogout(appEl);\naddAbilityToSend(appEl);\n\n// Run when starting...\ncheckSession();\n\nfunction checkSession() {\n\twaitOnLogin();\n\trender({ state, appEl });\n\tfetchSession()\n\t\t// when starts, commonly won't execute, because it will throw a auth-missing error\n\t\t.then(() => {\n\t\t\tlogin();\n\t\t\twaitOnUsers();\n\t\t\twaitOnMessages();\n\t\t\trender({ state, appEl });\n\t\t\treturn Promise.all([fetchUsers(), fetchMessages()]);\n\t\t})\n\t\t.then((data) => {\n\t\t\tsetUsers(data[0]);\n\t\t\tsetMessages(data[1]);\n\t\t\trender({ state, appEl });\n\t\t})\n\t\t.catch((err) => {\n\t\t\tif (err?.error === SERVER.AUTH_MISSING) {\n\t\t\t\tlogout();\n\t\t\t\trender({ state, appEl });\n\t\t\t} else {\n\t\t\t\tsetError(err?.error || 'ERROR');\n\t\t\t\trender({ state, appEl });\n\t\t\t}\n\t\t})\n\t\t.then(() => {\n\t\t\tsetInterval(refreshUsersAndMessages, 5000);\n\t\t});\n}\n\nfunction refreshUsersAndMessages() {\n\tif (!state.isLoggedIn) return;\n\n\tfetchUsers()\n\t\t.then((users) => {\n\t\t\tsetUsers(users);\n\t\t\trenderUsers({ state, appEl });\n\t\t\treturn fetchMessages();\n\t\t})\n\t\t.then((messages) => {\n\t\t\t// This line makes sure that if there is no new message, it will not render.\n\t\t\tif (messages.length === state.messages.length) return;\n\t\t\tsetMessages(messages);\n\t\t\trenderMessages({ state, appEl });\n\t\t})\n\t\t.catch((err) => {\n\t\t\tif (err?.error === SERVER.AUTH_MISSING) {\n\t\t\t\tlogout();\n\t\t\t\trender({ state, appEl });\n\t\t\t} else {\n\t\t\t\tsetError(err?.error || 'ERROR');\n\t\t\t\trender({ state, appEl });\n\t\t\t}\n\t\t});\n}\n"],"names":["SERVER","AUTH_MISSING","INVALID_USERNAME","FORBIDDEN_USERNAME","INVALID_MESSAGE","CLIENT","NETWORK_ERROR","MESSAGES","_MESSAGES","_defineProperty","fetchSession","fetchLogin","fetchLogout","fetchAddMessage","fetchUsers","fetchMessages","state","waitOnLogin","login","logout","waitOnUsers","setUsers","waitOnMessages","setMessages","setError","render","renderMessages","addAbilityToLogin","appEl","addEventListener","e","preventDefault","target","classList","contains","usernameInput","querySelector","value","then","Promise","all","data","err","error","addAbilityToLogout","addAbilityToSend","messageInputEl","messages","spinnerHTML","_ref","html","concat","generateLoginHTML","generateChatHTML","innerHTML","isLoginPending","isLoggedIn","showError","generateUsersHTML","generateMessagesHTML","generateLogoutHTML","generateSendFormHTML","isUsersPending","Object","entries","users","map","el","slice","join","isMessagesPending","reverse","username","message","renderUsers","_ref2","usersEl","_ref3","messagesEl","fetch","method","reject","resp","ok","json","headers","Headers","body","JSON","stringify","resolve","document","checkSession","setInterval","refreshUsersAndMessages","length"],"sourceRoot":""}